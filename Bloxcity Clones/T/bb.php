
<?php
function BBCode ($string) {
$string = htmlentities($string);
$search = array(
'@\[(?i)b\](.*?)\[/(?i)b\]@si',
'@\[(?i)i\](.*?)\[/(?i)i\]@si',
'@\[(?i)u\](.*?)\[/(?i)u\]@si',
'@\[(?i)img\](.*?)\[/(?i)img\]@si',
'@\[(?i)code\](.*?)\[/(?i)code\]@si',
'@\[(?i)s\](.*?)\[/(?i)s\]@si',
//--------1-------------
'#(?<!\w):D(?!\w)#i',
'#(?<!\w):hap:(?!\w)#i',
'#(?<!\w)(?!\w)#i',
'#(?<!\w):hap2:(?!\w)#i',
//--------2-------------
'#(?<!\w):ang:(?!\w)#i',
'#(?<!\w):ash:(?!\w)#i',
'#(?<!\w):^^:(?!\w)#i',
'#(?<!\w):oo:(?!\w)#i',
//--------3-------------
'#(?<!\w):bat:(?!\w)#i',
'#(?<!\w):cold:(?!\w)#i',
'#(?<!\w):hot:(?!\w)#i',
'#(?<!\w):inv:(?!\w)#i',
//--------4-------------
'#(?<!\w):jmp:(?!\w)#i',
'#(?<!\w):love:(?!\w)#i',
'#(?<!\w):ninja:(?!\w)#i',
'#(?<!\w):vcool:(?!\w)#i'


);
$replace = array(
'<b>\\1</b>',
'<i>\\1</i>',
'<u>\\1</u>',
'<img src="\\1">',
'<code>\\1</code>',
'<s>\\1</s>'

);
return preg_replace($search , $replace, $string);
}



?> 
